webpackJsonp([1],{"4tw3":function(e,t){},"7E0g":function(e,t){},AUI1:function(e,t){},F22e:function(e,t){},LicG:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("SbZC"),r=a("DVuL"),l=a.n(r),o=(a("LicG"),a("aozt")),i=a.n(o),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var c=a("C7Lr")({name:"App"},s,!1,function(e){a("AUI1")},null,null).exports,u=a("KGCO"),d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v(e._s(e.msg))]),e._v(" "),a("h2",[e._v("Essential Links")]),e._v(" "),e._m(0),e._v(" "),a("h2",[e._v("Ecosystem")]),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[e._v("\n          Core Docs\n        ")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[e._v("\n          Forum\n        ")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[e._v("\n          Community Chat\n        ")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[e._v("\n          Twitter\n        ")])]),e._v(" "),a("br"),e._v(" "),a("li",[a("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[e._v("\n          Docs for This Template\n        ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n          vue-router\n        ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n          vuex\n        ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n          vue-loader\n        ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n          awesome-vue\n        ")])])])}]};a("C7Lr")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},d,!1,function(e){a("tGEK")},"data-v-d8ec41bc",null).exports;var m=function(e){return i.a.post("http://127.0.0.1:8000/delete_rule",e)},f={name:"Home",data:function(){return{menuData:""}},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)}},mounted:function(){var e=this;i.a.get("http://127.0.0.1:8000/alarm_rules/").then(function(t){e.menuData=t.data})}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-container",[a("el-header",[a("h2",{staticClass:"headlogo"},[e._v("报警邮件规则")])]),e._v(" "),a("el-container",[a("el-aside",{attrs:{width:"200px"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{data:e.menuData,"default-active":"this.$router.path",router:""},on:{open:e.handleOpen,close:e.handleClose}},e._l(e.menuData,function(t,n){return a("el-menu-item",{key:n,attrs:{index:""+n,route:{name:"rulelist",params:{id:t.id}}}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.description))])])}),1)],1),e._v(" "),a("el-main",[a("div",{staticStyle:{"margin-top":"10px"}},[a("router-view")],1)])],1)],1)],1)},staticRenderFns:[]};var v=a("C7Lr")(f,h,!1,function(e){a("7E0g")},"data-v-e810ca0e",null).exports,p={name:"page1",data:function(){return{tableData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}]}},methods:{handleEdit:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)}},props:["id"]},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"日期",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.date))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("姓名: "+e._s(t.row.name))]),e._v(" "),a("p",[e._v("住址: "+e._s(t.row.address))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.name))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)},staticRenderFns:[]};a("C7Lr")(p,_,!1,function(e){a("4tw3")},"data-v-05a32ad5",null).exports;var b=a("ZLEe"),g=a.n(b),w={name:"page1",data:function(){return{path:this.$router.currentRoute.path,tableData:[],multipleSelection:[],delArr:[],formInline:{game:"",receiver:""},gameList:[],userList:[],dialogFormVisible:!1,addForm:{alarmType:"",game:"",receiver:""},formLabelWidth:"120px"}},methods:{handleEdit:function(e,t){console.log(e,t)},handleSelectionChange:function(e){this.multipleSelection=e,console.log(e)},handleDelete:function(e,t){var a=this;this.$confirm("确认删除？").then(function(e){var n=a.id,r=t.id;a.delArr.push(r),m({alarmId:n,delArr:a.delArr}).then(function(e){1==e.data.code&&a.fetchData()})}).catch(function(e){})},handleMultiDelete:function(){var e=this;this.$confirm("确认批量删除？").then(function(t){for(var a=e.id,n=e.multipleSelection.length,r=0;r<n;r++)e.delArr.push(e.multipleSelection[r].id);m({alarmId:a,delArr:e.delArr}).then(function(t){1==t.data.code&&e.fetchData()})}).catch(function(e){})},fetchData:function(){var e,t=this,a=this.id;(e=a,i.a.get("http://127.0.0.1:8000/alarm_rules/"+e)).then(function(e){var a=e.data,n=t;n.tableData=a.mailoperation_set,n.addForm.alarmType=a.description})},getGameInfo:function(){var e=this;i.a.get("http://127.0.0.1:8000/apps").then(function(t){var a=t.data;e.gameList=a})},getUserInfo:function(){var e=this;i.a.get("http://127.0.0.1:8000/users").then(function(t){var a=t.data;e.userList=a})},onSubmit:function(){var e,t=this,a=this.addForm;(e={params:a},i.a.post("http://127.0.0.1:8000/add_rule",e)).then(function(e){1==e.data.code&&t.fetchData()}),this.dialogFormVisible=!1},handleSearch:function(){console.log(this.tableData),console.log("submit!")},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})}},computed:{FilteredTableData:function(){var e=this.formInline.game;return e?this.tableData.filter(function(t){return g()(t).some(function(a){return String(t[a]).toLowerCase().indexOf(e)>-1})}):this.tableData}},props:["id"],watch:{$route:"fetchData"}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",[a("el-col",{attrs:{span:8}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新建")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"danger"},on:{click:e.handleMultiDelete}},[e._v("批量删除")])],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"游戏名"},model:{value:e.formInline.game,callback:function(t){e.$set(e.formInline,"game",t)},expression:"formInline.game"}})],1)],1)],1),e._v(" "),a("el-table",{attrs:{data:e.FilteredTableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{label:"游戏名",width:"180",prop:"game",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.game))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"收件人",width:"180",prop:"receiver",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.receiver))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增规则",visible:e.dialogFormVisible,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.addForm}},[a("el-form-item",{attrs:{label:"邮件类型","label-width":e.formLabelWidth}},[a("el-input",{attrs:{readonly:""},model:{value:e.addForm.alarmType,callback:function(t){e.$set(e.addForm,"alarmType",t)},expression:"addForm.alarmType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"游戏名","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择游戏"},on:{focus:function(t){e.getGameInfo()}},model:{value:e.addForm.game,callback:function(t){e.$set(e.addForm,"game",t)},expression:"addForm.game"}},e._l(e.gameList,function(e,t){return a("el-option",{key:t,attrs:{label:e.gname,value:e.gname}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"收件人","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择收件人"},on:{focus:e.getUserInfo},model:{value:e.addForm.receiver,callback:function(t){e.$set(e.addForm,"receiver",t)},expression:"addForm.receiver"}},e._l(e.userList,function(e,t){return a("el-option",{key:t,attrs:{label:e.useridentity,value:e.useridentity}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var k=a("C7Lr")(w,y,!1,function(e){a("F22e")},"data-v-08af61e5",null).exports;n.default.use(u.a);var F=new u.a({routes:[{path:"/",name:"Home",component:v,children:[{path:"rules/:id",name:"rulelist",component:k,props:!0}]}]});n.default.use(l.a),n.default.prototype.$axios=i.a,n.default.config.productionTip=!1,new n.default({el:"#app",router:F,components:{App:c},template:"<App/>"})},tGEK:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.03e4a4f7076c32ae41e6.js.map